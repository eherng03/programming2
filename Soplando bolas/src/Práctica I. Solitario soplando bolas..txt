Práctica I. Solitario soplando bolas.
Disponible desde: lunes, 25 de enero de 2016, 17:35
Límite de entrega: lunes, 25 de enero de 2016, 18:05
Número máximo de ficheros: 5
Tipo de trabajo: Trabajo individual
El rompecabezas Soplar Bolas.

El rompecabezas soplar bolas (http://www.clickmazes.com/puffball/ixpuffball.htm) se juega en un tablero rectangular con n x m celdas en el que puede haber un cierto número de bolas k y un número igual k de celdas definidas como posiciones finales. Cada celda sólo puede contener una bola y/o una posición final. El objetivo es llevar todas las bolas a sus posiciones finales. Las bolas sólo se pueden mover soplando desde otra bola. Cuando se sopla desde una bola, todas las bolas que están en su misma fila o columna se desplazan una casilla alejándose de la bola desde la que se sopla. Los límites del tablero son paredes que impiden que las bolas se muevan más.

Se pide un programa que dado un rompecabezas de soplar bolas lo resuelva, dando por la salida todas las soluciones posibles. Puede que el rompecabezas no tenga solución en cuyo caso se emitirá el mensaje "Rompecabezas sin solución." Si la entrada no es exactamente como se indica a continuación se emitirá un mensaje indicando "Entrada errónea." y se finalizará el programa.

Entrada

Todos los números de la entrada son números positivos y mayores que cero. Las casillas se referencian comenzando en 1 y el origen se encuentra en la casilla superior izquierda. La entrada consistirá de las siguientes líneas:

1ª línea: Dos números enteros indicando el tamaño del tablero en filas y columnas.

2ª línea: Un número entero p indicando el número de posiciones objetivo que hay.

3ª línea: p pares de números indicando las coordenadas de cada posición objetivo.

4ª línea: p pares de números indicando las posiciones de las bolas. Las bolas también se numeran implícitamente comenzando en 1. 

Salida

Una lista con todas las soluciones posibles, cada una en una línea separada y completa y ordenadas entre sí ascendentemente usando el orden lexicográfico. Una solución vendrá dada por una secuencia de números de bolas indicando los soplidos que hay que hacer y sobre qué bola para resolver el rompecabezas.  Una solución nunca incluirá una subsolución, es decir nunca conllevará alcanzar la posición final más de una vez. La solución empieza y termina con corchetes y cada número de bola está separado con una coma seguida de un espacio en blanco del siguiente salvo el último al que no sigue ni la coma ni el espacio en blanco. 

Si no hay necesidad de ningún movimiento la solución aparecerá como [].

Ejemplo
Entrada

4 4

5

1 3 2 1 3 2 3 4 4 2

1 3 2 1 2 2 2 3 3 4

Salida

[1, 5, 3, 2, 1, 5]

English Version
The puff-ball puzzle

The puff-ball puzzle (http://www.clickmazes.com/puffball/ixpuffball.htm) is played on a rectangular board with n x m cells where may be a number of balls and an equal number of cells defined as end positions. Each cell can only contain one ball and/or an end position. The goal is to bring all balls to their final positions. The only valid move is blow from a ball. When you blow from a ball, all the balls that are in the same row or column move away one square. The limits of the board are walls that prevent the balls move more.

You have to build a program that solves a puzz-ball puzzle, giving all possible solutions as  sequences of movements.  Perhaps the puzzle has no solution in which case the program must print the message  "Rompecabezas sin solución." If the input is not exactly as it is indicated below, the program will print the message "Entrada errónea." and it will end.

Input

All input numbers are positive and greater than zero. The cells are referenced starting at 1 and the origin is in the upper left cell. Input will consist of the following lines:

1st line: Two integer numbers indicating the size of the board in rows and columns.

2nd line: An integer p indicating the number of target positions.

3rd line: p pairs of numbers indicating the coordinates of each target position.

4th line: p pairs of numbers indicating the positions of each ball. The balls are also implicitly numbered starting at 1.

Output

A list of all possible solutions, each one on a separate and complete line and in ascending lexicographic order with respect to the numbers of the balls. Each solution is given by a sequence of numbers indicating the balls where you need to blow to solve the puzzle. A solution will never include a partial solution, i.e. it never visits the final position more than once.The solution begins and ends with square brackets and each ball number is separated by a comma followed by a blank space except to the last that follows neither the comma or blank.

If there is no need for any movement the solution appears as [].

Example
Input

4 4

5

1 3 2 1 3 2 3 4 4 2

1 3 2 1 2 2 2 3 3 4

Output

[1, 5, 3, 2, 1, 5]